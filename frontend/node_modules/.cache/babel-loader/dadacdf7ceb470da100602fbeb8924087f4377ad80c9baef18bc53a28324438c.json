{"ast":null,"code":"var _jsxFileName = \"/home/nikunj/Desktop/Android_dev/DASS2k23-Team-49/frontend/src/components/auth/signin.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport setAuthToken from '../../utils/setAuthToken';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport { withRouter } from '../navigation/withRouter';\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport { TextField } from \"@mui/material\";\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass signin extends Component {\n  constructor() {\n    super();\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n    this.onSubmit = e => {\n      e.preventDefault();\n      const userData = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      axios.post('/api/signin', userData).then(res => {\n        // Save to localStorage// Set token to localStorage\n        const {\n          token\n        } = res.data;\n        localStorage.setItem('jwtToken', token);\n        // Set token to Auth header\n        setAuthToken(token);\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n        // console.log(decoded)\n        // Set current user\n        this.props.setuser(decoded.userId);\n        this.gotoprofile();\n      }).catch(err => console.log(err.toString()));\n    };\n    this.state = {\n      email: '',\n      password: '',\n      errors: {}\n    };\n  }\n  componentDidMount() {\n    // If logged in and user navigates to Register page, should redirect them to dashboard\n\n    if (this.props.authentication && localStorage.jwtToken) {\n      this.props.navigate('/profile');\n    }\n  }\n  gotoprofile() {\n    console.log('gotoprofile');\n    this.props.navigate('/profile');\n  }\n  render() {\n    const {\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 0,\n        direction: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        style: {\n          minHeight: '100vh'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '4rem'\n              },\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(Stack, {\n                direction: \"column\",\n                spacing: 4,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col s8 offset-s2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: \"KIDVENTURES\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 75,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 76,\n                    columnNumber: 17\n                  }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                    noValidate: true,\n                    onSubmit: this.onSubmit,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-field col s12\",\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        label: \"Email\",\n                        onChange: this.onChange,\n                        value: this.state.email,\n                        error: errors.email,\n                        id: \"email\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 79,\n                        columnNumber: 21\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 78,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 87,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"input-field col s12\",\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        label: \"Password\",\n                        onChange: this.onChange,\n                        value: this.state.password,\n                        error: errors.password,\n                        id: \"password\",\n                        type: \"password\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 89,\n                        columnNumber: 21\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 88,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 98,\n                      columnNumber: 19\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col s12\",\n                      style: {\n                        paddingLeft: '33%'\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"contained\",\n                        type: \"submit\",\n                        className: \"btn btn-large waves-effect waves-light hoverable blue accent-3\",\n                        children: \"Login\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 100,\n                        columnNumber: 21\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 19\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 77,\n                    columnNumber: 17\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 15\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 13\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 7\n        }, this), \"  \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }, this)\n    }, void 0, false);\n  }\n}\nexport default withRouter(signin);","map":{"version":3,"names":["React","Component","Link","setAuthToken","axios","jwt_decode","withRouter","Container","Grid","Typography","TextField","Button","Stack","jsxDEV","_jsxDEV","Fragment","_Fragment","signin","constructor","onChange","e","setState","target","id","value","onSubmit","preventDefault","userData","email","state","password","post","then","res","token","data","localStorage","setItem","decoded","props","setuser","userId","gotoprofile","catch","err","console","log","toString","errors","componentDidMount","authentication","jwtToken","navigate","render","children","container","spacing","direction","alignItems","justifyContent","style","minHeight","item","xs","className","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","noValidate","label","error","type","paddingLeft","variant"],"sources":["/home/nikunj/Desktop/Android_dev/DASS2k23-Team-49/frontend/src/components/auth/signin.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport setAuthToken from '../../utils/setAuthToken'\nimport axios from 'axios'\nimport jwt_decode from 'jwt-decode'\nimport { withRouter } from '../navigation/withRouter'\nimport Container from '@mui/material/Container';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport { TextField } from \"@mui/material\";\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\n\nclass signin extends Component {\n  constructor() {\n    super()\n    this.state = {\n      email: '',\n      password: '',\n      errors: {}\n    }\n  }\n  componentDidMount() {\n    // If logged in and user navigates to Register page, should redirect them to dashboard\n\n    if (this.props.authentication && localStorage.jwtToken) {\n      this.props.navigate('/profile')\n    }\n  }\n  gotoprofile() {\n    console.log('gotoprofile')\n    this.props.navigate('/profile')\n  }\n  onChange = e => {\n    this.setState({ [e.target.id]: e.target.value })\n  }\n  onSubmit = e => {\n    e.preventDefault()\n    const userData = {\n      email: this.state.email,\n      password: this.state.password\n    }\n    axios\n      .post('/api/signin', userData)\n      .then(res => {\n        // Save to localStorage// Set token to localStorage\n        const { token } = res.data\n        localStorage.setItem('jwtToken', token)\n        // Set token to Auth header\n        setAuthToken(token)\n        // Decode token to get user data\n        const decoded = jwt_decode(token)\n        // console.log(decoded)\n        // Set current user\n        this.props.setuser(decoded.userId)\n        this.gotoprofile()\n      })\n      .catch(err => console.log(err.toString()))\n  }\n  render() {\n    const { errors } = this.state\n    return (<><Grid\n      container\n      spacing={0}\n      direction=\"column\"\n      alignItems=\"center\"\n      justifyContent=\"center\"\n      style={{ minHeight: '100vh' }}\n    >\n      <Grid item xs={3}>\n        <div className='container'>\n          <div style={{ marginTop: '4rem' }} className='row'>\n            <Stack direction=\"column\" spacing={4}>\n              <div className='col s8 offset-s2'>\n                <h1>KIDVENTURES</h1>\n                <br />\n                <form noValidate onSubmit={this.onSubmit}>\n                  <div className='input-field col s12'>\n                    <TextField\n                      label=\"Email\"\n                      onChange={this.onChange}\n                      value={this.state.email}\n                      error={errors.email}\n                      id='email'\n                    />\n                  </div>\n                  <br></br>\n                  <div className='input-field col s12'>\n                    <TextField\n                      label=\"Password\"\n                      onChange={this.onChange}\n                      value={this.state.password}\n                      error={errors.password}\n                      id='password'\n                      type='password'\n                    />\n                  </div>\n                  <br></br>\n                  <div className='col s12' style={{ paddingLeft: '33%' }}>\n                    <Button variant=\"contained\"\n                      type='submit'\n                      className='btn btn-large waves-effect waves-light hoverable blue accent-3'\n                    >\n                      Login\n                    </Button>\n                  </div>\n                </form>\n              </div>\n            </Stack>\n          </div>\n        </div></Grid>  </Grid></>\n    )\n  }\n}\nexport default withRouter(signin)\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}